# RAG 챗봇 API 및 UI 구현 계획서

> **작성일**: 2025-08-08 09:00  
> **대상**: RAG 시스템 완성 후 API/UI 구현  
> **목표**: 완성된 RAG 시스템에 REST API 및 웹 UI 추가하여 사용자 인터페이스 제공  

## 개요

5-6단계에서 완성된 RAG 시스템(노션 문서 기반 질의응답)을 바탕으로, 사용자가 실제로 사용할 수 있는 API와 웹 인터페이스를 구현하는 계획입니다.

## 전제 조건

### 5-6단계 완료 상태
- ✅ `DocumentProcessor`: 노션 문서 → Pinecone 저장 파이프라인
- ✅ `RAGService`: 질문 → 검색 → 답변 생성 플로우
- ✅ 완전한 RAG 시스템: 노션 문서 1개 기반 질의응답 동작

### 개발 원칙 (지속 적용)
1. **최소 기능으로 시작 (MVP First)**
2. **필요할 때만 확장 (Progressive Enhancement)**  
3. **과도한 엔지니어링 자제**

---

## 상세 개발 단계

### 7단계: 기본 REST 채팅 API 🌐
**예상 소요시간**: 1-2시간 (최소 기능 우선)  
**목표**: RAG 서비스를 HTTP API로 노출

#### 최소 기능 구현 (필수)
- [ ] **채팅 API 엔드포인트**
  - `POST /api/chat` 단일 엔드포인트
  - 요청: `{ message: string }`
  - 응답: `{ response: string, sources: Source[] }`
  - 기본 에러 처리 (400, 500)

- [ ] **요청/응답 검증**
  - Zod 스키마 기반 간단한 검증
  - 필수 필드 체크만
  - 타입 안전성 보장

- [ ] **RAGService 연동**
  - 기존 `RAGService.askQuestion()` 호출
  - 응답 형태 변환 (API 스키마에 맞게)
  - 기본 로깅

#### 향후 개선사항 (나중에 추가)
- 대화 기록 저장
- 사용자 인증
- Rate limiting
- 상세한 에러 처리
- API 문서 자동 생성
- 응답 캐싱

#### 완료 기준 (최소 동작 수준)
- [ ] curl/Postman으로 질의응답 테스트 가능
- [ ] RAG 서비스와 완전 연동
- [ ] 기본 에러 상황 처리
- [ ] 응답에 출처 정보 포함

---

### 8단계: 기본 웹 UI 구현 🎨
**예상 소요시간**: 3-4시간 (최소 기능 우선)  
**목표**: 간단한 채팅 인터페이스로 RAG 시스템 테스트

#### 최소 기능 구현 (필수)
- [ ] **프론트엔드 프로젝트 설정**
  - React + Vite (빠른 설정)
  - TypeScript 기본 설정
  - 간단한 CSS (Tailwind 없이 기본 CSS)

- [ ] **기본 채팅 UI**
  - 질문 입력 텍스트박스
  - 전송 버튼
  - 답변 표시 영역
  - 출처 링크 표시

- [ ] **REST API 연동**
  - fetch API 사용 (라이브러리 없이)
  - 기본 로딩 상태 표시
  - 에러 메시지 표시

#### 향후 개선사항 (나중에 추가)
- 대화 기록 표시
- 스트리밍 응답
- 고급 UI 라이브러리 적용
- 반응형 디자인
- 다크모드
- 사용자 인증 UI

#### 완료 기준 (최소 동작 수준)
- [ ] 웹 브라우저에서 질문 입력 가능
- [ ] RAG 시스템의 답변 확인 가능
- [ ] 출처 정보 클릭으로 원본 링크 접근
- [ ] 기본적인 사용성 확보

---

### 9단계: 실시간 스트리밍 응답 ⚡
**예상 소요시간**: 2-3시간 (최소 기능 우선)  
**목표**: OpenAI 스트리밍을 활용한 실시간 응답

#### 최소 기능 구현 (필수)
- [ ] **서버 사이드 스트리밍**
  - OpenAI 스트리밍 API 활용
  - Server-Sent Events (SSE) 사용 (Socket.io 대신 단순한 방법)
  - 기본 스트림 에러 처리

- [ ] **클라이언트 사이드 스트리밍**
  - EventSource API 사용
  - 실시간 텍스트 업데이트
  - 스트림 완료 처리

#### 향후 개선사항 (나중에 추가)
- Socket.io로 업그레이드
- 다중 사용자 지원
- 연결 상태 관리
- 재연결 로직
- 스트리밍 에러 복구

#### 완료 기준 (최소 동작 수준)
- [ ] 답변이 실시간으로 타이핑되어 나타남
- [ ] 스트리밍 중 기본 에러 처리
- [ ] 스트리밍 완료 후 출처 정보 표시

---

## 마일스톤 및 검증 포인트

### 마일스톤 3: 완전한 RAG 챗봇 시스템 (7-9단계)
- [ ] REST API로 RAG 기능 완전 제공
- [ ] 웹 UI로 일반 사용자 접근 가능  
- [ ] 실시간 응답으로 향상된 사용자 경험
- [ ] 전체 시스템 통합 테스트 완료

### 최종 시스템 구성
```
사용자 → 웹 UI → REST API → RAGService → PineconeService → Pinecone
                              ↓
                         EmbeddingService → OpenAI (Chat + Embedding)
                              ↓
                         NotionService → Notion
```

## 성공 기준

### 기능적 요구사항
- [ ] 웹 브라우저에서 자연어 질문 입력 가능
- [ ] 노션 문서 기반 정확한 답변 생성
- [ ] 실시간 스트리밍으로 답변 표시
- [ ] 출처 정보로 원본 문서 추적 가능

### 비기능적 요구사항
- [ ] 답변 생성 시간 10초 이내 (스트리밍 시작은 3초 이내)
- [ ] 기본적인 UI/UX 품질 확보
- [ ] API 응답 시간 2초 이내
- [ ] 타입 안전성 유지 (프론트엔드 포함)

## 위험 요소 및 대응 방안

### 기술적 위험
- **스트리밍 구현 복잡도**: SSE로 시작, 필요시 Socket.io 업그레이드
- **CORS 이슈**: 개발 환경에서 적절한 CORS 설정
- **UI 상태 관리**: 간단한 useState로 시작, 복잡해지면 상태 관리 라이브러리 추가

### 개발 위험  
- **프론트엔드 설정 시간**: Vite 사용으로 빠른 설정
- **API 연동 디버깅**: 단계별 테스트로 문제 격리
- **스트리밍 디버깅**: 기본 REST API 동작 확인 후 스트리밍 추가

---

**현재 계획 범위**: [7-9단계: API 및 UI 구현]  
**연관 문서**: `250807-1110-rag-chatbot-migration.md` (1-6단계)  
**최종 수정일**: 2025-08-08 09:00  
**책임자**: Development Team